{"ast":null,"code":"import _defineProperty from \"/opt/lampp/htdocs/myprojects/tropik/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nimport { ADD_REGLEMENTS, FETCH_REGLEMENTS, UPDATE_REGLEMENTS } from '../actions/typesReglement';\nconst initState = {\n  dataReglements: [// {\n    // \tNumReglement:1,\n    // \tMontantReglement: 30000,\n    // \tEtatReglement: \"1\",\n    // \tAnneeReglement: \"2019\"\n    // }\n  ]\n};\n\nconst ReglementsReducers = (state = initState, action) => {\n  switch (action.type) {\n    case ADD_REGLEMENTS:\n      const std = [_objectSpread({}, action.data)];\n      console.log(std);\n      axios.post(\"http://localhost/myprojects/tropik/backend/Reglements/post\", std, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      }).then(h => console.log(h)).catch(err => console.log(\"error parsing:\\n\", err));\n      state.dataReglements = [...state.dataReglements, std[0]];\n      return Object.assign({}, state, state.dataReglements);\n\n    case FETCH_REGLEMENTS:\n      state.dataReglements = [];\n      state.dataReglements = [...action.data];\n      return Object.assign({}, state, state.dataReglements);\n\n    case UPDATE_REGLEMENTS:\n      // console.log(action.data)\n      if (action.data !== null) {\n        const std1 = state.dataReglements.filter(e => {\n          return e.NumReglement !== action.data[0].NumReglement;\n        });\n        const sto1 = action.data;\n        state.dataReglements = [...std1, ...sto1];\n        axios.post(\"http://localhost/myprojects/tropik/backend/Reglements/put/\" + action.data[0].NumReglement, sto1, {\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n        }).then(e => {\n          console.log(e.status); // if(e.status===200){\n          // \tstate.dataReglements = [\n          // \t\t...std1,\n          // \t\t...sto1\n          // \t];\n          // }\n\n          return null;\n        }).catch(err => console.log(\"error parsing:\\n\", err));\n      }\n\n      return Object.assign({}, state, state.dataReglements);\n\n    default:\n      return state;\n  }\n};\n\nexport default ReglementsReducers;","map":{"version":3,"sources":["/opt/lampp/htdocs/myprojects/tropik/frontend/src/reducers/ReglementReducers.jsx"],"names":["axios","ADD_REGLEMENTS","FETCH_REGLEMENTS","UPDATE_REGLEMENTS","initState","dataReglements","ReglementsReducers","state","action","type","std","data","console","log","post","headers","then","h","catch","err","Object","assign","std1","filter","e","NumReglement","sto1","status"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACCC,cADD,EAECC,gBAFD,EAGCC,iBAHD,QAIO,2BAJP;AAMA,MAAMC,SAAS,GAAG;AACjBC,EAAAA,cAAc,EAAE,CACf;AACA;AACA;AACA;AACA;AACA;AANe;AADC,CAAlB;;AAWA,MAAMC,kBAAkB,GAAG,CAACC,KAAK,GAAGH,SAAT,EAAoBI,MAApB,KAA+B;AACzD,UAAQA,MAAM,CAACC,IAAf;AACC,SAAKR,cAAL;AACC,YAAMS,GAAG,GAAG,mBACRF,MAAM,CAACG,IADC,EAAZ;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AAEAV,MAAAA,KAAK,CAACc,IAAN,CACC,4DADD,EAECJ,GAFD,EAEM;AACJK,QAAAA,OAAO,EAAE;AACR,0BAAgB;AADR;AADL,OAFN,EAOEC,IAPF,CAOOC,CAAC,IACPL,OAAO,CAACC,GAAR,CAAYI,CAAZ,CARD,EASEC,KATF,CASQC,GAAG,IAAIP,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCM,GAAhC,CATf;AAUAZ,MAAAA,KAAK,CAACF,cAAN,GAAuB,CACtB,GAAGE,KAAK,CAACF,cADa,EACGK,GAAG,CAAC,CAAD,CADN,CAAvB;AAGA,aAAOU,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBd,KAAlB,EAAyBA,KAAK,CAACF,cAA/B,CAAP;;AACD,SAAKH,gBAAL;AACCK,MAAAA,KAAK,CAACF,cAAN,GAAuB,EAAvB;AACAE,MAAAA,KAAK,CAACF,cAAN,GAAuB,CACtB,GAAGG,MAAM,CAACG,IADY,CAAvB;AAGA,aAAOS,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBd,KAAlB,EAAyBA,KAAK,CAACF,cAA/B,CAAP;;AAED,SAAKF,iBAAL;AACC;AACA,UAAIK,MAAM,CAACG,IAAP,KAAgB,IAApB,EAA0B;AACzB,cAAMW,IAAI,GAAGf,KAAK,CAACF,cAAN,CAAqBkB,MAArB,CAA4BC,CAAC,IAAI;AAC7C,iBAAOA,CAAC,CAACC,YAAF,KAAmBjB,MAAM,CAACG,IAAP,CAAY,CAAZ,EAAec,YAAzC;AACA,SAFY,CAAb;AAGA,cAAMC,IAAI,GAAGlB,MAAM,CAACG,IAApB;AACAJ,QAAAA,KAAK,CAACF,cAAN,GAAuB,CACtB,GAAGiB,IADmB,EAEtB,GAAGI,IAFmB,CAAvB;AAKA1B,QAAAA,KAAK,CAACc,IAAN,CAAW,+DAA+DN,MAAM,CAACG,IAAP,CAAY,CAAZ,EAAec,YAAzF,EACCC,IADD,EACO;AACLX,UAAAA,OAAO,EAAE;AACR,sBAAU,kBADF;AAER,4BAAgB;AAFR;AADJ,SADP,EAMIC,IANJ,CAMUQ,CAAD,IAAO;AACdZ,UAAAA,OAAO,CAACC,GAAR,CAAYW,CAAC,CAACG,MAAd,EADc,CAEd;AACA;AACA;AACA;AACA;AACA;;AACA,iBAAO,IAAP;AACA,SAfF,EAiBET,KAjBF,CAiBQC,GAAG,IAAIP,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCM,GAAhC,CAjBf;AAkBA;;AAGD,aAAOC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBd,KAAlB,EAAyBA,KAAK,CAACF,cAA/B,CAAP;;AAED;AACC,aAAOE,KAAP;AAhEF;AAkEA,CAnED;;AAqEA,eAAeD,kBAAf","sourcesContent":["import axios from 'axios';\nimport {\n\tADD_REGLEMENTS,\n\tFETCH_REGLEMENTS,\n\tUPDATE_REGLEMENTS\n} from '../actions/typesReglement';\n\nconst initState = {\n\tdataReglements: [\n\t\t// {\n\t\t// \tNumReglement:1,\n\t\t// \tMontantReglement: 30000,\n\t\t// \tEtatReglement: \"1\",\n\t\t// \tAnneeReglement: \"2019\"\n\t\t// }\n\t]\n}\n\nconst ReglementsReducers = (state = initState, action) => {\n\tswitch (action.type) {\n\t\tcase ADD_REGLEMENTS:\n\t\t\tconst std = [{\n\t\t\t\t...action.data\n\t\t\t}]\n\t\t\tconsole.log(std);\n\n\t\t\taxios.post(\n\t\t\t\t\"http://localhost/myprojects/tropik/backend/Reglements/post\",\n\t\t\t\tstd, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(h =>\n\t\t\t\tconsole.log(h)\n\t\t\t).catch(err => console.log(\"error parsing:\\n\", err));\n\t\t\tstate.dataReglements = [\n\t\t\t\t...state.dataReglements, std[0]\n\t\t\t];\n\t\t\treturn Object.assign({}, state, state.dataReglements);\n\t\tcase FETCH_REGLEMENTS:\n\t\t\tstate.dataReglements = [];\n\t\t\tstate.dataReglements = [\n\t\t\t\t...action.data\n\t\t\t];\n\t\t\treturn Object.assign({}, state, state.dataReglements);\n\n\t\tcase UPDATE_REGLEMENTS:\n\t\t\t// console.log(action.data)\n\t\t\tif (action.data !== null) {\n\t\t\t\tconst std1 = state.dataReglements.filter(e => {\n\t\t\t\t\treturn e.NumReglement !== action.data[0].NumReglement;\n\t\t\t\t});\n\t\t\t\tconst sto1 = action.data;\n\t\t\t\tstate.dataReglements = [\n\t\t\t\t\t...std1,\n\t\t\t\t\t...sto1\n\t\t\t\t];\n\n\t\t\t\taxios.post(\"http://localhost/myprojects/tropik/backend/Reglements/put/\" + action.data[0].NumReglement,\n\t\t\t\t\tsto1, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then((e) => {\n\t\t\t\t\t\tconsole.log(e.status)\n\t\t\t\t\t\t// if(e.status===200){\n\t\t\t\t\t\t// \tstate.dataReglements = [\n\t\t\t\t\t\t// \t\t...std1,\n\t\t\t\t\t\t// \t\t...sto1\n\t\t\t\t\t\t// \t];\n\t\t\t\t\t\t// }\n\t\t\t\t\t\treturn null\n\t\t\t\t\t}\n\n\t\t\t\t).catch(err => console.log(\"error parsing:\\n\", err));\n\t\t\t}\n\n\n\t\t\treturn Object.assign({}, state, state.dataReglements);\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport default ReglementsReducers;"]},"metadata":{},"sourceType":"module"}