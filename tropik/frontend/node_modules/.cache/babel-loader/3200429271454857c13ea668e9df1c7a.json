{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/myprojects/tropik/frontend/src/Components/Clients/GAlertDialogSlide.jsx\";\nimport React, { Component } from 'react';\nimport { Button, Fab, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@material-ui/core';\nimport { Add } from '@material-ui/icons/';\nimport { connect } from 'react-redux';\nimport shortid from 'shortid';\nimport AlertDialogSlideR from './AlertConfirmationReservation';\n\nclass GAlertDialogSlide extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      NumClient: '',\n      ConditionReservation: '',\n      error: false\n    };\n    this.date1 = this.props.date1;\n    this.date2 = this.props.date2; // var NomChambre = props.NomChambre;\n  }\n\n  OnChange(e) {\n    this.setState({\n      NumClient: e.target.value\n    }); // console.log(props.clients)\n\n    const stock = this.props.clients.dataClients.filter(function (h) {\n      // console.log(h)\n      return h.NumClient === e.target.value;\n    });\n\n    if (stock.length !== 0) {\n      this.setState({\n        error: false\n      });\n      this.props.updateNameClient(stock[0].NomClient);\n    } else {\n      this.props.updateNameClient(\"\");\n      this.setState({\n        error: true\n      });\n    }\n  }\n\n  handleClickOpen() {\n    this.setState({\n      open: true,\n      ConditionReservation: ''\n    });\n    this.props.updateNameClient(\"\");\n  }\n\n  handleClose() {\n    this.setState({\n      open: false,\n      ConditionReservation: ''\n    });\n    this.date2 = \"\";\n    this.date1 = \"\";\n    this.props.updateNameClient(\"\");\n  }\n\n  dataReserver() {\n    const StockNumReglement = shortid.generate(); // const prix = props.chambres.dataChambres.filter(e=>{\n    //   return e.NomChambre === NomChambre;\n    // })[0].PrixChambre;\n\n    const st = {\n      NumReglement: StockNumReglement,\n      // MontantReglement: parseInt(prix) * (Math.round((date2 - date1) / (1000 * 3600 * 24))),\n      MontantReglement: 0,\n      EtatReglement: \"0\",\n      AnneeReglement: new Date().getFullYear().toString()\n    };\n    const stock = {\n      NumReservation: shortid.generate(),\n      DateDebutReservation: this.formattedDateDatabase(this.props.date1),\n      DateFinReservation: this.formattedDateDatabase(this.props.date2),\n      NbJourReservation: Math.round((this.props.date2 - this.props.date1) / (1000 * 3600 * 24)),\n      ConditionReservation: this.state.ConditionReservation,\n      NumClient: this.state.numClient,\n      NumReglement: StockNumReglement\n    };\n    return [st, stock];\n  }\n\n  formattedDate(d) {\n    let month = String(d.getMonth() + 1);\n    let day = String(d.getDate());\n    const year = String(d.getFullYear());\n    if (month.length < 2) month = '0' + month;\n    if (day.length < 2) day = '0' + day;\n    return \"\".concat(day, \"/\").concat(month, \"/\").concat(year);\n  }\n\n  formattedDateDatabase(d) {\n    let month = String(d.getMonth() + 1);\n    let day = String(d.getDate());\n    const year = String(d.getFullYear());\n    if (month.length < 2) month = '0' + month;\n    if (day.length < 2) day = '0' + day;\n    return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n  }\n\n  OnChangeConditionReservation(e) {\n    this.setState({\n      ConditionReservation: e.target.value\n    });\n  }\n\n  OnClickAddClient(e) {\n    var stock = this.props.clients.dataClients.filter(e => {\n      return e.NomClient === this.props.clients.changes.NomClient;\n    }).length === 0;\n\n    if (stock) {\n      this.props.addClients();\n      var client = this.props.clients.dataClients.filter(e => {\n        return e.NomClient === this.props.clients.changes.NomClient;\n      })[0].NumClient;\n      this.setState({\n        NumClient: client\n      });\n    } else {\n      alert(\"name already exist\");\n    }\n  }\n\n  OnChangeNameClients(e) {\n    this.props.onChangeClient(e.target);\n  }\n\n  render() {\n    // const Props = this.props;\n    // const Transition = React.forwardRef(function Transition(Props,ref) {\n    //   return <Slide direction=\"up\" ref={ref} {...Props}/>;\n    // });\n    return React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(Fab, {\n      color: \"primary\",\n      variant: \"extended\",\n      size: \"small\",\n      \"aria-label\": \"delete\",\n      className: \"addReservation\",\n      onClick: this.handleClickOpen.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(Add, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), \"reserver\"), \" \", React.createElement(Dialog, {\n      open: this.state.open,\n      keepMounted: true,\n      onClose: this.handleClose.bind(this),\n      \"aria-labelledby\": \"alert-dialog-slide-title\",\n      \"aria-describedby\": \"alert-dialog-slide-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(DialogTitle, {\n      id: \"alert-dialog-slide-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Reservation chambres\"), React.createElement(DialogContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      label: \"NOM CHAMBRE\",\n      placeholder: \"Example\",\n      margin: \"normal\",\n      name: \"pseudo\",\n      value: this.props.NomChambre,\n      style: {\n        width: 140\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"DATE DEBUT\",\n      placeholder: \"Example\",\n      margin: \"normal\",\n      name: \"pseudo\",\n      value: this.formattedDate(this.props.date1),\n      style: {\n        width: 120\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), \" \", React.createElement(TextField, {\n      label: \"DATE FIN\",\n      placeholder: \"Example\",\n      margin: \"normal\",\n      name: \"pseudo\",\n      value: this.formattedDate(this.props.date2),\n      style: {\n        width: 120\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"JOURS\",\n      placeholder: \"Example\",\n      margin: \"normal\",\n      name: \"pseudo\",\n      value: Math.round((this.props.date2 - this.props.date1) / (1000 * 3600 * 24)),\n      style: {\n        width: 50,\n        marginLeft: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"N\\xB0\",\n      placeholder: \"1\",\n      margin: \"normal\",\n      name: \"NumClient\",\n      style: {\n        width: 100\n      },\n      value: this.state.NumClient,\n      onChange: this.OnChange.bind(this),\n      error: this.state.error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), \" \", React.createElement(TextField, {\n      label: \"Votre nom\",\n      placeholder: \"persone\",\n      margin: \"normal\",\n      name: \"NomClient\",\n      value: this.props.clients.changes.NomClient,\n      onChange: this.OnChangeNameClients.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), \" \", React.createElement(Button, {\n      variant: \"outlined\",\n      style: {\n        position: 'relative',\n        top: 30,\n        padding: 5,\n        minWidth: 35\n      },\n      onClick: this.OnClickAddClient,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(Add, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      id: \"outlined-multiline-flexible\",\n      label: \"Remarque\",\n      multiline: true,\n      rowsMax: \"4\",\n      margin: \"normal\",\n      helperText: \"votre petit remarque ici ...\",\n      variant: \"outlined\",\n      value: this.state.ConditionReservation,\n      onChange: this.OnChangeConditionReservation.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    })), React.createElement(DialogActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(AlertDialogSlideR, {\n      dataThis: this.handleClose.bind(this),\n      NomChambre: this.props.NomChambre,\n      dataReserver: this.dataReserver(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: this.handleClose.bind(this),\n      color: \"primary\",\n      variant: \"outlined\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Cancel\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    clients: state.clients,\n    chambres: state.chambres\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addClients: () => {\n      dispatch({\n        type: \"ADD_CLIENTS\"\n      });\n    },\n    onChangeClient: data => {\n      dispatch({\n        type: \"ON_CHANGE_CLIENT\",\n        data\n      });\n    },\n    updateNameClient: data => {\n      dispatch({\n        type: \"UPDATE_NAME_CLIENT\",\n        data\n      });\n    },\n    addReservation: data => {\n      dispatch({\n        type: \"ADD_RESERVER\",\n        data\n      });\n    },\n    addReglement: data => {\n      dispatch({\n        type: \"ADD_REGLEMENT\",\n        data\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GAlertDialogSlide);","map":{"version":3,"sources":["/opt/lampp/htdocs/myprojects/tropik/frontend/src/Components/Clients/GAlertDialogSlide.jsx"],"names":["React","Component","Button","Fab","Dialog","DialogActions","DialogContent","DialogTitle","TextField","Add","connect","shortid","AlertDialogSlideR","GAlertDialogSlide","constructor","props","state","open","NumClient","ConditionReservation","error","date1","date2","OnChange","e","setState","target","value","stock","clients","dataClients","filter","h","length","updateNameClient","NomClient","handleClickOpen","handleClose","dataReserver","StockNumReglement","generate","st","NumReglement","MontantReglement","EtatReglement","AnneeReglement","Date","getFullYear","toString","NumReservation","DateDebutReservation","formattedDateDatabase","DateFinReservation","NbJourReservation","Math","round","numClient","formattedDate","d","month","String","getMonth","day","getDate","year","OnChangeConditionReservation","OnClickAddClient","changes","addClients","client","alert","OnChangeNameClients","onChangeClient","render","bind","NomChambre","width","marginLeft","position","top","padding","minWidth","mapStateToProps","chambres","mapDispatchToProps","dispatch","type","data","addReservation","addReglement"],"mappings":"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","sourcesContent":["import React ,{Component} from 'react';\nimport {\n  Button,\n  Fab,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  TextField\n} from '@material-ui/core';\nimport {Add} from '@material-ui/icons/';\nimport {connect} from 'react-redux';\nimport shortid from 'shortid';\nimport AlertDialogSlideR from './AlertConfirmationReservation';\n\nclass GAlertDialogSlide extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      NumClient: '',\n      ConditionReservation: '',\n      error: false\n    }\n    this.date1 = this.props.date1;\n    this.date2 = this.props.date2;\n  \n  // var NomChambre = props.NomChambre;\n  }\n  \n  OnChange(e) {\n    this.setState({\n      NumClient: e.target.value\n    });\n    // console.log(props.clients)\n    const stock = this.props.clients.dataClients.filter(function(h){\n      // console.log(h)\n      return h.NumClient === e.target.value;\n    });\n    if(stock.length!==0){\n      this.setState({\n        error: false\n      })\n      this.props.updateNameClient(stock[0].NomClient);\n    }else{\n      this.props.updateNameClient(\"\");\n      this.setState({\n        error: true\n      });\n    }\n  }\n\n  handleClickOpen() {\n    this.setState({\n      open: true,\n      ConditionReservation: ''\n    });\n    this.props.updateNameClient(\"\");\n  }\n\n  handleClose() {\n    this.setState({\n      open: false,\n      ConditionReservation: ''\n    });\n    this.date2 = \"\";\n    this.date1 = \"\";\n    this.props.updateNameClient(\"\");\n  }\n\n  dataReserver() {\n    const StockNumReglement = shortid.generate();\n    // const prix = props.chambres.dataChambres.filter(e=>{\n    //   return e.NomChambre === NomChambre;\n    // })[0].PrixChambre;\n    const st = {\n  \t\t\tNumReglement: StockNumReglement,\n  \t\t\t// MontantReglement: parseInt(prix) * (Math.round((date2 - date1) / (1000 * 3600 * 24))),\n  \t\t\tMontantReglement: 0,\n  \t\t\tEtatReglement: \"0\",\n  \t\t\tAnneeReglement: new Date().getFullYear().toString()\n    }\n    const stock = {\n      NumReservation: shortid.generate(),\n      DateDebutReservation: this.formattedDateDatabase(this.props.date1),\n      DateFinReservation: this.formattedDateDatabase(this.props.date2),\n      NbJourReservation: Math.round((this.props.date2 - this.props.date1) / (1000 * 3600 * 24)),\n      ConditionReservation: this.state.ConditionReservation,\n      NumClient: this.state.numClient,\n      NumReglement: StockNumReglement\n    }\n    return ([st, stock]);\n  }\n\n\n  formattedDate(d) {\n    let month = String(d.getMonth() + 1);\n    let day = String(d.getDate());\n    const year = String(d.getFullYear());\n\n    if (month.length < 2)\n      month = '0' + month;\n    if (day.length < 2)\n      day = '0' + day;\n\n    return `${day}/${month}/${year}`;\n  }\n\n  formattedDateDatabase(d) {\n    let month = String(d.getMonth() + 1);\n    let day = String(d.getDate());\n    const year = String(d.getFullYear());\n\n    if (month.length < 2)\n      month = '0' + month;\n    if (day.length < 2)\n      day = '0' + day;\n\n    return `${year}-${month}-${day}`;\n  }\n  OnChangeConditionReservation(e) {\n    this.setState({\n      ConditionReservation: e.target.value\n    })\n  }\n\n  OnClickAddClient(e){\n    var stock = this.props.clients.dataClients.filter(e=>{\n      return e.NomClient === this.props.clients.changes.NomClient;\n    }).length === 0;\n    if(stock){\n      this.props.addClients();\n      var client = this.props.clients.dataClients.filter(e=>{\n        return e.NomClient === this.props.clients.changes.NomClient;\n      })[0].NumClient;\n      this.setState({\n        NumClient: client\n      })\n    }else{\n      alert(\"name already exist\")\n    }\n  }\n\n  OnChangeNameClients(e){\n    this.props.onChangeClient(e.target);\n  }\n  render() {\n    // const Props = this.props;\n    // const Transition = React.forwardRef(function Transition(Props,ref) {\n    //   return <Slide direction=\"up\" ref={ref} {...Props}/>;\n    // });\n    return (<span>\n      <Fab color='primary' variant=\"extended\" size='small' aria-label=\"delete\" className='addReservation' onClick={this.handleClickOpen.bind(this)}>\n        <Add/>\n        reserver\n      </Fab>{\" \"}\n      <Dialog open={this.state.open} keepMounted={true} onClose={this.handleClose.bind(this)} aria-labelledby=\"alert-dialog-slide-title\" aria-describedby=\"alert-dialog-slide-description\">\n        <DialogTitle id=\"alert-dialog-slide-title\">{\"Reservation chambres\"}</DialogTitle>\n        <DialogContent>\n          <TextField label=\"NOM CHAMBRE\" placeholder=\"Example\" margin=\"normal\" name=\"pseudo\" value={this.props.NomChambre} style={{width: 140}}/>\n          <br/>\n          <TextField label=\"DATE DEBUT\" placeholder=\"Example\" margin=\"normal\" name=\"pseudo\" value={this.formattedDate(this.props.date1)} style={{width: 120}}/>{\" \"}\n          <TextField label=\"DATE FIN\" placeholder=\"Example\" margin=\"normal\" name=\"pseudo\" value={this.formattedDate(this.props.date2)} style={{width: 120}}/>\n          <TextField\n            label=\"JOURS\"\n            placeholder=\"Example\"\n            margin=\"normal\"\n            name=\"pseudo\"\n            value={Math.round((this.props.date2 - this.props.date1) / (1000 * 3600 * 24))}\n            style={{width: 50, marginLeft: 20}}\n          /><br/>\n  \n          <TextField\n            label=\"NÂ°\"\n            placeholder=\"1\"\n            margin=\"normal\"\n            name=\"NumClient\"\n            style={{width: 100}}\n            value={this.state.NumClient}\n            onChange={this.OnChange.bind(this)}\n            error={this.state.error}\n          />{\" \"}\n          <TextField label=\"Votre nom\" placeholder=\"persone\" margin=\"normal\" name=\"NomClient\" value={this.props.clients.changes.NomClient} onChange={this.OnChangeNameClients.bind(this)}/>{\" \"}\n          <Button\n            variant=\"outlined\"\n            style={{position: 'relative',top:30, padding:5, minWidth: 35}}\n            onClick={this.OnClickAddClient}>\n            <Add/>\n          </Button>\n          <br/>\n  \n          <TextField id=\"outlined-multiline-flexible\" label=\"Remarque\" multiline={true} rowsMax=\"4\" margin=\"normal\" helperText=\"votre petit remarque ici ...\" variant=\"outlined\" value={this.state.ConditionReservation} onChange={this.OnChangeConditionReservation.bind(this)}/>\n          <br/>\n  \n        </DialogContent>\n        <DialogActions>\n          <AlertDialogSlideR \n            dataThis={this.handleClose.bind(this)} \n            NomChambre={this.props.NomChambre} \n            dataReserver={this.dataReserver()} \n          />\n  \n          <Button onClick={this.handleClose.bind(this)} color=\"primary\" variant='outlined'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </span>);\n  }\n}\n\n\nconst mapStateToProps = state => {\n\treturn {clients: state.clients, chambres: state.chambres}\n}\n\nconst mapDispatchToProps = dispatch => {\n\treturn {\n    addClients: () => {\n      dispatch({type: \"ADD_CLIENTS\"});\n    },\n    onChangeClient: (data) => {\n      dispatch({type: \"ON_CHANGE_CLIENT\", data});\n    },\n    updateNameClient: (data) => {\n      dispatch({type: \"UPDATE_NAME_CLIENT\", data});\n    },\n    addReservation: (data) => {\n      dispatch({type: \"ADD_RESERVER\", data});\n    },\n    addReglement: (data) => {\n      dispatch({type: \"ADD_REGLEMENT\", data});\n    },\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GAlertDialogSlide);\n"]},"metadata":{},"sourceType":"module"}