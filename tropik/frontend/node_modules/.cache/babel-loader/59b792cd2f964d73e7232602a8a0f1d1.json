{"ast":null,"code":"import { ADD_TABLE_CLIENTS, DELETE_TABLE_CLIENTS, UPDATE_TABLE_CLIENTS, FETCH_TABLE_CLIENTS } from '../actions/typesTableClients';\nimport axios from 'axios';\nconst initState = {\n  columns: [{\n    title: 'Num',\n    field: 'NumClient'\n  }, {\n    title: 'Nom',\n    field: 'NomClient'\n  }, {\n    title: 'Address',\n    field: 'AddressClient'\n  }, {\n    title: 'Code Postal',\n    field: 'CpClient'\n  }, {\n    title: 'Pays',\n    field: 'PaysClient',\n    lookup: {\n      'Madagascar': 'Madagascar',\n      'USA': 'USA',\n      72: 'France'\n    }\n  }, {\n    title: 'Tel',\n    field: 'TelClient'\n  }, {\n    title: 'Email',\n    field: 'EmailClient'\n  }, {\n    title: 'Annee',\n    field: 'AnneeCreClient'\n  }],\n  data: [// {\n    //   NumClient: 'Mehmet',\n    //   NomClient: 'Baran',\n    //   AddressClient: 'Fianarantsoa',\n    //   CpClient: '301',\n    //   PaysClient: 'Madagascar',\n    //   TelClient: '0343949863',\n    //   EmailClient: 'rasolondraibeandrianantenaina@gmail.com',\n    //   AnneeCreClient: '2019'\n    // }, {\n    //   NumClient: 'Zerya Betül',\n    //   NomClient: 'Baran',\n    //   AddressClient: 'Antanarivo',\n    //   CpClient: '101',\n    //   PaysClient: 'Madagascar',\n    //   TelClient: '0343949863',\n    //   EmailClient: 'rasolondraibeandrianantenaina@gmail.com',\n    //   AnneeCreClient: '2019'\n    // }, {\n    //   NumClient: 'Zerya',\n    //   NomClient: 'Baran',\n    //   AddressClient: 'Ambalavao',\n    //   CpClient: '303',\n    //   PaysClient: 'Madagascar',\n    //   TelClient: '0343949863',\n    //   EmailClient: 'rasolondraibeandrianantenaina@gmail.com',\n    //   AnneeCreClient: '2019'\n    // }\n  ]\n};\n\nconst TableClientsReducers = (state = initState, action) => {\n  switch (action.type) {\n    case ADD_TABLE_CLIENTS:\n      state.data = [...state.data, action.data];\n      var stockAdd = action.data;\n      var dataAdd = [{\n        NumClient: stockAdd.NumClient,\n        NomClient: stockAdd.NomClient,\n        AddressClient: stockAdd.AddressClient,\n        CpClient: stockAdd.CpClient,\n        PaysClient: stockAdd.PaysClient,\n        TelClient: stockAdd.TelClient,\n        EmailClient: stockAdd.EmailClient,\n        AnneeCreClient: new Date().getFullYear()\n      }];\n      console.log(dataAdd);\n      axios.post(\"http://localhost/myprojects/tropik/backend/Clients/post\", dataAdd, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      }).then(h => console.log(h)).catch(err => console.log(\"error parsing:\\n\", err));\n      return Object.assign({}, state, state.data);\n\n    case DELETE_TABLE_CLIENTS:\n      const mocks1 = [...state.data];\n      mocks1.splice(mocks1.indexOf(action.oldData), 1);\n      state.data = [...mocks1];\n      axios.delete(\"http://localhost/myprojects/tropik/backend/Clients/delete/\" + action.oldData.NumClient, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      }).then(res => res.data).then(state => this.props.fetchTableClients(state)).catch(err => console.log(\"error parsing:\\n\", err));\n      return Object.assign({}, state, state.data);\n\n    case UPDATE_TABLE_CLIENTS:\n      const mocks2 = [...state.data];\n      mocks2[mocks2.indexOf(action.oldData)] = action.newData;\n      state.data = [...mocks2];\n      var stock = action.newData;\n      var data = [{\n        NumClient: stock.NumClient,\n        NomClient: stock.NomClient,\n        AddressClient: stock.AddressClient,\n        CpClient: stock.CpClient,\n        PaysClient: stock.PaysClient,\n        TelClient: stock.TelClient,\n        EmailClient: stock.EmailClient,\n        AnneeCreClient: new Date().getFullYear()\n      }];\n      console.log(data);\n      axios.post(\"http://localhost/myprojects/tropik/backend/Clients/put/\" + action.oldData.NumClient, data, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      }).then(h => console.log(h)).catch(err => console.log(\"error parsing:\\n\", err));\n      return Object.assign({}, state, state.data);\n\n    case FETCH_TABLE_CLIENTS:\n      state.data = [];\n      state.data = action.data;\n      const date = new Date();\n      const years = date.getFullYear();\n      const mounth = (parseInt(date.getMonth()) < 10 ? '0' : '') + date.getMonth();\n      const days = (parseInt(date.getDate()) < 10 ? '0' : '') + date.getDate();\n      state.dateNow = years + \"-\" + mounth + \"-\" + days;\n      return Object.assign({}, state, state.dataChambres);\n\n    default:\n      return state;\n  }\n};\n\nexport default TableClientsReducers;","map":{"version":3,"sources":["/opt/lampp/htdocs/myprojects/tropik/frontend/src/reducers/TableClientsReducers.jsx"],"names":["ADD_TABLE_CLIENTS","DELETE_TABLE_CLIENTS","UPDATE_TABLE_CLIENTS","FETCH_TABLE_CLIENTS","axios","initState","columns","title","field","lookup","data","TableClientsReducers","state","action","type","stockAdd","dataAdd","NumClient","NomClient","AddressClient","CpClient","PaysClient","TelClient","EmailClient","AnneeCreClient","Date","getFullYear","console","log","post","headers","then","h","catch","err","Object","assign","mocks1","splice","indexOf","oldData","delete","res","props","fetchTableClients","mocks2","newData","stock","date","years","mounth","parseInt","getMonth","days","getDate","dateNow","dataChambres"],"mappings":"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","sourcesContent":["import {ADD_TABLE_CLIENTS, DELETE_TABLE_CLIENTS, UPDATE_TABLE_CLIENTS, FETCH_TABLE_CLIENTS} from '../actions/typesTableClients';\nimport axios from 'axios';\n\nconst initState = {\n  columns: [\n    {\n      title: 'Num',\n      field: 'NumClient'\n    }, {\n      title: 'Nom',\n      field: 'NomClient'\n    }, {\n      title: 'Address',\n      field: 'AddressClient'\n    }, {\n      title: 'Code Postal',\n      field: 'CpClient'\n    }, {\n      title: 'Pays',\n      field: 'PaysClient',\n      lookup: {\n        'Madagascar': 'Madagascar',\n        'USA': 'USA',\n        72: 'France'\n      }\n    }, {\n      title: 'Tel',\n      field: 'TelClient'\n    }, {\n      title: 'Email',\n      field: 'EmailClient'\n    }, {\n      title: 'Annee',\n      field: 'AnneeCreClient'\n    }\n  ],\n\n  data: [\n    // {\n    //   NumClient: 'Mehmet',\n    //   NomClient: 'Baran',\n    //   AddressClient: 'Fianarantsoa',\n    //   CpClient: '301',\n    //   PaysClient: 'Madagascar',\n    //   TelClient: '0343949863',\n    //   EmailClient: 'rasolondraibeandrianantenaina@gmail.com',\n    //   AnneeCreClient: '2019'\n    // }, {\n    //   NumClient: 'Zerya Betül',\n    //   NomClient: 'Baran',\n    //   AddressClient: 'Antanarivo',\n    //   CpClient: '101',\n    //   PaysClient: 'Madagascar',\n    //   TelClient: '0343949863',\n    //   EmailClient: 'rasolondraibeandrianantenaina@gmail.com',\n    //   AnneeCreClient: '2019'\n    // }, {\n    //   NumClient: 'Zerya',\n    //   NomClient: 'Baran',\n    //   AddressClient: 'Ambalavao',\n    //   CpClient: '303',\n    //   PaysClient: 'Madagascar',\n    //   TelClient: '0343949863',\n    //   EmailClient: 'rasolondraibeandrianantenaina@gmail.com',\n    //   AnneeCreClient: '2019'\n    // }\n  ]\n}\n\nconst TableClientsReducers = (state = initState, action) => {\n  switch (action.type) {\n    case ADD_TABLE_CLIENTS:\n      state.data = [\n        ...state.data,\n        action.data\n      ]\n\n      var stockAdd = action.data;\n\n      var dataAdd = [\n        {\n          NumClient: stockAdd.NumClient,\n          NomClient: stockAdd.NomClient,\n          AddressClient: stockAdd.AddressClient,\n          CpClient: stockAdd.CpClient,\n          PaysClient: stockAdd.PaysClient,\n          TelClient: stockAdd.TelClient,\n          EmailClient: stockAdd.EmailClient,\n          AnneeCreClient: new Date().getFullYear()\n        }\n      ]\n      console.log(dataAdd);\n      axios.post(\"http://localhost/myprojects/tropik/backend/Clients/post\", dataAdd, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      }).then(h => console.log(h)).catch(err => console.log(\"error parsing:\\n\", err));\n      return Object.assign({}, state, state.data);\n\n    case DELETE_TABLE_CLIENTS:\n      const mocks1 = [...state.data];\n      mocks1.splice(mocks1.indexOf(action.oldData), 1);\n      state.data = [...mocks1];\n      axios.delete(\"http://localhost/myprojects/tropik/backend/Clients/delete/\" + action.oldData.NumClient, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      }).then(res => res.data).then(state => this.props.fetchTableClients(state)).catch(err => console.log(\"error parsing:\\n\", err));\n      return Object.assign({}, state, state.data);\n\n    case UPDATE_TABLE_CLIENTS:\n      const mocks2 = [...state.data];\n      mocks2[mocks2.indexOf(action.oldData)] = action.newData;\n\n      state.data = [...mocks2];\n      var stock = action.newData;\n\n      var data = [\n        {\n          NumClient: stock.NumClient,\n          NomClient: stock.NomClient,\n          AddressClient: stock.AddressClient,\n          CpClient: stock.CpClient,\n          PaysClient: stock.PaysClient,\n          TelClient: stock.TelClient,\n          EmailClient: stock.EmailClient,\n          AnneeCreClient: new Date().getFullYear()\n        }\n      ]\n      console.log(data);\n      axios.post(\"http://localhost/myprojects/tropik/backend/Clients/put/\" + action.oldData.NumClient, data, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      }).then(h => console.log(h)).catch(err => console.log(\"error parsing:\\n\", err));\n      return Object.assign({}, state, state.data);\n\n    case FETCH_TABLE_CLIENTS:\n      state.data = [];\n      state.data = action.data;\n      const date = new Date();\n      const years = date.getFullYear();\n      const mounth = (\n        (parseInt(date.getMonth()) < 10)\n        ? '0'\n        : '') + date.getMonth();\n      const days = (\n        (parseInt(date.getDate()) < 10)\n        ? '0'\n        : '') + date.getDate();\n      state.dateNow = years + \"-\" + mounth + \"-\" + days\n      return Object.assign({}, state, state.dataChambres);\n\n    default:\n      return state;\n  }\n}\n\nexport default TableClientsReducers;\n"]},"metadata":{},"sourceType":"module"}