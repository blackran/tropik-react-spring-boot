{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/myprojects/tropik/frontend/src/Components/Clients/AnnexChambresDetails.jsx\";\nimport './styles/Chambres.scss';\nimport { PanoramaFishEyeOutlined } from '@material-ui/icons';\nimport axios from 'axios';\nimport React, { lazy, Component, Suspense } from 'react';\nimport { connect } from 'react-redux';\nconst ChambreCardPattern = lazy(() => import('./ChambreCardPattern'));\n\nclass AnnexChambresDetails extends Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n  }\n\n  // otherGetChambrePrix(){\n  //   const stock = lazy(new Promise((resolve, reject) => {\n  //       return resolve(this.getChambrePrix());\n  //   }))\n  //   return stock;\n  // }\n  getChambrePrix() {\n    const reservation = this.props.reserver.dataReserver.filter(e => {\n      const d1 = new Date(e.DateDebutReservation);\n      const d2 = new Date(e.DateFinReservation);\n      const d3 = this.props.reserver.date1;\n      const d4 = this.props.reserver.date2;\n      const d5 = d1 - d3; //si d5>0 d3 < d1\n\n      const d6 = d2 - d4; //si d6>0 d4 < d2\n\n      const d7 = d3 - d2; //si d7>0 d2 < d3\n\n      const d8 = d4 - d1; //si d8>0 d1 < d4\n      // d3 < d1 && d2 < d4                 d5>0 && d6<0\n      // d3 < d1 && d4 < d2  && d1 < d4     d5>0 && d6>0 && d8>0\n      // d1 < d3 && d4 < d2                 d5<0 && d6>0\n      // d1 < d3 && d2 < d4  && d3 < d2     d5<0 && d6<0 && d7<0\n\n      var stock = false;\n\n      if (d5 > 0 && d6 < 0 || d5 > 0 && d6 > 0 && d8 > 0 || d5 < 0 && d6 > 0 || d5 < 0 && d6 < 0 && d7 < 0) {\n        stock = true;\n      }\n\n      return stock;\n    });\n    const newStock = reservation.map(h => {\n      return h.NumReservation;\n    });\n    const concerner = this.props.concerner.dataConcerner.filter(e => {\n      return newStock.includes(e.NumReservation);\n    });\n    const newConcerner = concerner.map(e => {\n      return e.NomChambre;\n    });\n    const chambres = this.props.chambres.newDataChambres.filter(e => {\n      return parseInt(e.PrixChambre) <= parseInt(this.props.chambres.slide) && !newConcerner.includes(e.NomChambre);\n    });\n    return chambres;\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n\n    if (this.props.chambres.newDataChambres.length === 0) {\n      axios.get(\"http://localhost/myprojects/tropik/backend/Chambres/get\").then(res => res.data).then(state => this.props.newDataChambres(state.filter(e => e.NumType === this.props.types))).catch(err => console.log(\"error parsing:\\n\", err));\n    }\n  } // devient active quand cette component est demonter\n\n\n  componentWillUnmount() {\n    this._isMounted = false;\n    this.props.newDataChambres([]);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"AllListChambre\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(Suspense, {\n      fallback: React.createElement(\"div\", {\n        style: {\n          position: 'relative',\n          top: 100\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \" \", React.createElement(PanoramaFishEyeOutlined, {\n        className: \"loading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, this.getChambrePrix().length !== 0 ? this.getChambrePrix().map((e, k) => {\n      return React.createElement(\"div\", {\n        key: e.NomChambre,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(ChambreCardPattern, {\n        data: e,\n        delay: k,\n        key: e.NomChambre,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }));\n    }) : React.createElement(\"h1\", {\n      style: {\n        position: 'relative',\n        top: 100\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Ces types de chambres n'existent pas chez nous\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    chambres: state.chambres,\n    reserver: state.reserver,\n    concerner: state.concerner,\n    clients: state.clients\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateOne: data => {\n      dispatch({\n        type: \"UPDATE_ONE\",\n        data\n      });\n    },\n    updateEroor: data => {\n      dispatch({\n        type: \"UPDATE_EROOR\",\n        data: data\n      });\n    },\n    fetchchambres: data => {\n      dispatch({\n        type: \"FETCH_CHAMBRES\",\n        data: data\n      });\n    },\n    updateSlide: data => {\n      dispatch({\n        type: \"ON_CHANGE_SLIDER\",\n        data: data\n      });\n    },\n    updateDate1: data => {\n      dispatch({\n        type: \"UPDATE_DATE_1\",\n        data: data\n      });\n    },\n    updateDate2: data => {\n      dispatch({\n        type: \"UPDATE_DATE_2\",\n        data: data\n      });\n    },\n    fetchClients: data => {\n      dispatch({\n        type: \"FETCH_CLIENTS\",\n        data: data\n      });\n    },\n    newDataChambres: data => {\n      dispatch({\n        type: \"NEW_DATA_CHAMBRES\",\n        data: data\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AnnexChambresDetails);","map":{"version":3,"sources":["/opt/lampp/htdocs/myprojects/tropik/frontend/src/Components/Clients/AnnexChambresDetails.jsx"],"names":["PanoramaFishEyeOutlined","axios","React","lazy","Component","Suspense","connect","ChambreCardPattern","AnnexChambresDetails","_isMounted","getChambrePrix","reservation","props","reserver","dataReserver","filter","e","d1","Date","DateDebutReservation","d2","DateFinReservation","d3","date1","d4","date2","d5","d6","d7","d8","stock","newStock","map","h","NumReservation","concerner","dataConcerner","includes","newConcerner","NomChambre","chambres","newDataChambres","parseInt","PrixChambre","slide","componentDidMount","length","get","then","res","data","state","NumType","types","catch","err","console","log","componentWillUnmount","render","position","top","k","mapStateToProps","clients","mapDispatchToProps","dispatch","updateOne","type","updateEroor","fetchchambres","updateSlide","updateDate1","updateDate2","fetchClients"],"mappings":"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","sourcesContent":["import './styles/Chambres.scss';\n\nimport {PanoramaFishEyeOutlined} from '@material-ui/icons';\nimport axios from 'axios';\nimport React, {lazy, Component, Suspense} from 'react';\nimport {connect} from 'react-redux';\n\nconst ChambreCardPattern = lazy(() => import ('./ChambreCardPattern'));\n\nclass AnnexChambresDetails extends Component {\n  _isMounted = false;\n\n  // otherGetChambrePrix(){\n  //   const stock = lazy(new Promise((resolve, reject) => {\n  //       return resolve(this.getChambrePrix());\n  //   }))\n  //   return stock;\n  // }\n  getChambrePrix() {\n    const reservation = this.props.reserver.dataReserver.filter((e) => {\n      const d1 = new Date(e.DateDebutReservation);\n      const d2 = new Date(e.DateFinReservation);\n      const d3 = this.props.reserver.date1;\n      const d4 = this.props.reserver.date2;\n      const d5 = d1 - d3 //si d5>0 d3 < d1\n      const d6 = d2 - d4 //si d6>0 d4 < d2\n      const d7 = d3 - d2 //si d7>0 d2 < d3\n      const d8 = d4 - d1 //si d8>0 d1 < d4\n\n      // d3 < d1 && d2 < d4                 d5>0 && d6<0\n      // d3 < d1 && d4 < d2  && d1 < d4     d5>0 && d6>0 && d8>0\n      // d1 < d3 && d4 < d2                 d5<0 && d6>0\n      // d1 < d3 && d2 < d4  && d3 < d2     d5<0 && d6<0 && d7<0\n\n      var stock = false;\n      if ((d5 > 0 && d6 < 0) || (d5 > 0 && d6 > 0 && d8 > 0) || (d5 < 0 && d6 > 0) || (d5 < 0 && d6 < 0 && d7 < 0)) {\n        stock = true;\n      }\n      return (stock);\n    })\n\n    const newStock = reservation.map((h) => {\n      return h.NumReservation;\n    })\n\n    const concerner = this.props.concerner.dataConcerner.filter((e) => {\n      return newStock.includes(e.NumReservation);\n    })\n\n    const newConcerner = concerner.map((e) => {\n      return e.NomChambre;\n    })\n\n    const chambres = this.props.chambres.newDataChambres.filter((e) => {\n      return ((parseInt(e.PrixChambre) <= parseInt(this.props.chambres.slide)) && (!newConcerner.includes(e.NomChambre)))\n    })\n    return chambres\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    if (this.props.chambres.newDataChambres.length === 0) {\n      axios.get(\"http://localhost/myprojects/tropik/backend/Chambres/get\").then(res => res.data).then(state => this.props.newDataChambres(state.filter(e => e.NumType === this.props.types))).catch(err => console.log(\"error parsing:\\n\", err));\n    }\n  }\n\n  // devient active quand cette component est demonter\n  componentWillUnmount() {\n    this._isMounted = false;\n    this.props.newDataChambres([])\n  }\n\n  render() {\n    return (<div className=\"AllListChambre\">\n      <Suspense fallback={<div style = {{position: 'relative', top: 100}} > <PanoramaFishEyeOutlined className=\"loading\"/></div>}>\n        {\n          this.getChambrePrix().length !== 0\n            ? (this.getChambrePrix().map((e, k) => {\n              return <div key={e.NomChambre}>\n                <ChambreCardPattern data={e} delay={k} key={e.NomChambre}/>\n              </div>\n            }))\n            : (<h1 style={{\n                position: 'relative',\n                top: 100\n              }}>Ces types de chambres n'existent pas chez nous</h1>)\n        }\n        </Suspense>\n        </div>);\n  }\n}\nconst mapStateToProps = state => {\n  return {chambres: state.chambres, reserver: state.reserver, concerner: state.concerner, clients: state.clients}\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateOne: (data) => {\n      dispatch({type: \"UPDATE_ONE\", data});\n    },\n    updateEroor: (data) => {\n      dispatch({type: \"UPDATE_EROOR\", data: data});\n    },\n    fetchchambres: (data) => {\n      dispatch({type: \"FETCH_CHAMBRES\", data: data});\n    },\n    updateSlide: (data) => {\n      dispatch({type: \"ON_CHANGE_SLIDER\", data: data});\n    },\n    updateDate1: (data) => {\n      dispatch({type: \"UPDATE_DATE_1\", data: data});\n    },\n    updateDate2: (data) => {\n      dispatch({type: \"UPDATE_DATE_2\", data: data});\n    },\n    fetchClients: (data) => {\n      dispatch({type: \"FETCH_CLIENTS\", data: data});\n    },\n    newDataChambres: (data) => {\n      dispatch({type: \"NEW_DATA_CHAMBRES\", data: data});\n    }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AnnexChambresDetails);\n"]},"metadata":{},"sourceType":"module"}